<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="animate.min.css">
  <script src="anime.min.js"></script>
  <script src="https://unpkg.com/scroll-out/dist/scroll-out.min.js"></script>
</head>
<body>
  <!-- <div class="bg home" id="bg"> -->
  <header class="home">
    <div class="nav">
      <a href="">
        Island Creamery
      </a>
      <div class="nav-menu">
        <a href="">Menu</a>
        <a href="">About</a>
        <a href="">Contact</a>
        <a href="">Gallery</a>
        <a href="">Cart</a>
      </div>
      </div>
    </div>
  </header>
  <!-- </div> -->
  <section class="page-header">
    <!-- <svg id="morph" height="100%" width="100%" viewBox="0 0 1920 1080" preserveAspectRatio="none">
      <path class="smorph" d="M0,1710s141.872,89.7,255.652,100.435,106.218-21.757,228.576-30.812,122.22-6.539,231.333,30.812,124.1,75.71,195.84,116.145,165.432,45.262,285.953,0,346.993,14.29,487.862-37.884,240-178.7,240-178.7V1163.478H0Z" fill="#F6F6F6"></path>
    </svg> -->
    <svg id="morph" height="100%" width="100%"  viewBox="0 0 1920 1080" preserveAspectRatio="none">
        <path class="morph" d="M0,1799.432s141.872,104.376,255.652,116.87,106.218-25.317,228.576-35.854,122.22-7.609,231.333,35.854,124.1,88.1,195.84,135.15,165.432,52.669,285.953,0,346.993,16.629,487.862-44.083,240-207.937,240-207.937V1163.478H0Z" transform="translate(0 -1163.478)" fill="#f6f6f6"/>
    </svg>
    <h1>It's always a<br> good time for ice cream.</h1>
    <p>You should order <span id="teh-tarik">Teh Tarik Cone</span></p>
    <div class="announcement">
      <img src="https://via.placeholder.com/55x37">
      <p>Try our new Durian ice <br> cream! Lorem ipsum <br> dolor sit amet</p>
    </div>
    <div class="highlight">
      <span><a href="">Yes! Give me a<br> scoop... and a tub!</a></span>
      <img src="https://via.placeholder.com/167x300">
      <span><a href="">Maybe <br> next time</a></span>
    </div>
    <div class="cue"><a href=""><strong>Click before<br> it drips!</strong></a></div>
  </section>
  <section class="flavours target1">
      <svg id="smorph" height="100%" width="100%"  viewBox="0 0 1920 1080" preserveAspectRatio="none"><path class="smorph" d="M0,3510v651.7s240.566,214.315,365.767,164.273,271.355-22.069,393.723,0,196.733,67.173,327.881,61.978,119-71.038,300.788-118.267,178.618,24.388,334.346,0,199.738-196.067,199.738-196.067V3510Z" transform="translate(0 -3700.5)" fill="white"/></svg>
      <div class="content-container">
        <h2>Best flavours on the island</h2>
        <p><span id="teh-tarik">Teh Tarik</span><span id="pineapple-tart">Pineapple Tart</span><span id="pulut-hitam">Pulut Hitam</span></p>
        <p><span id="tiger-sorbet">Tiger Sorbert</span><span id="pear-sake">Pear Sake</span><span id="cookies-cream">Cookies and Cream</span></p>
        <p><span id="soursop">Soursop</span><span id="fresh-banana">Fresh Bananas</span><span id="horlicks">Horlicks</span></p> 
        <p><span id="kahlua-latte">Kahlua Latte</span><span id="mango-sorbet">Mango Sorbet</span></p>
        <a href="">view menu</a>
      </div>
  </section>
  <section class="location target2">
      <h2>Find your nearest island</h2>
      <div class="places">
        <div class="place">
          <img src="https://via.placeholder.com/167x300">
          <div class="place-info">
            <p>ION Orchard</p>
            <p>B3-K1 2 Orchard Turn <br>ION Orchard S(238801)</p>
            <p>Tel: +65 6509 5608<br>Daily: 10am to 10pm</p>
            <a>Map</a>
          </div>
        </div>
        <div class="place">
          <img src="https://via.placeholder.com/167x300">
          <div class="place-info">
            <p>ION Orchard</p>
            <p>B3-K1 2 Orchard Turn <br>ION Orchard S(238801)</p>
            <p>Tel: +65 6509 5608<br>Daily: 10am to 10pm</p>
            <a>Map</a>
          </div>
        </div>
        <div class="place">
          <img src="https://via.placeholder.com/167x300">
          <div class="place-info">
            <p>ION Orchard</p>
            <p>B3-K1 2 Orchard Turn <br>ION Orchard S(238801)</p>
            <p>Tel: +65 6509 5608<br>Daily: 10am to 10pm</p>
            <a>Map</a>
          </div>
        </div>
        <div class="place">
          <img src="https://via.placeholder.com/167x300">
          <div class="place-info">
            <p>ION Orchard</p>
            <p>B3-K1 2 Orchard Turn <br>ION Orchard S(238801)</p>
            <p>Tel: +65 6509 5608<br>Daily: 10am to 10pm</p>
            <a>Map</a>
          </div>
        </div>
      </div>
      <svg id="smorph" height="100%" width="100%"  viewBox="0 0 1920 1080" preserveAspectRatio="none"><path class="a" d="M0,5760V5552.9s156.095,82.648,293.208,59.844,402.68,32.059,516.863,65.006,106.584,61.7,288.245,53.415,272.849-133.925,438.4-86.542,389.784-1.775,390.219-193.28,0,308.653,0,308.653Z" transform="translate(0 -5215.662)" fill="white"/></svg>
  </section>
  <section class="gallery target3">
      <h2>It's an Ice cream Social!</h2>
      <p>@islandcreamery</p>
      <div class="gallery-image">
        <div class="gallery-image-container">
          <img src="https://via.placeholder.com/300x300">
        </div>
        <div class="gallery-image-container">
          <img src="https://via.placeholder.com/300x300">
        </div>
        <div class="gallery-image-container">
          <img src="https://via.placeholder.com/300x300">
        </div>
        <div class="gallery-image-container">
          <img src="https://via.placeholder.com/300x300">
        </div>
      </div>
  </section>
  <footer class="footer dark">
    <svg id="scoop" height="100%" width="100%"  viewBox="0 0 1920 1080" preserveAspectRatio="none"><path class="scoop" d="M432.8,6930s12.51-99.936,141.327-238.245,573.646-217.46,688.987-173.7,257.876,140.645,301.527,272.161S1592.132,6930,1592.132,6930" transform="translate(-100 -5800.983)" fill="#D53940"/></svg>
    <div class="content">
      <div class="footer-links">
        <a href="">Jobs</a>
        <a href="">Contact</a>
        <a href="">FAQs</a>
      </div>
      <p>Â©2018 Island Creamery. Built by Sunny Side Up</p>
    </div>
  </footer>
  <script src='sticky.js'></script>
  <script type="module">
    import jump from './node_modules/jump.js/dist/jump.module.js';
    var overlay = document.getElementById('smorph'); 
    var one; 
    var two; 
    var three;
    clearTimeout(one);
    clearTimeout(three);
    clearTimeout(two);

    var morphing = anime({ 
      targets: '.smorph', 
      d: 
        { value: 'M0,3510v815.97s215.066,152.637,331.594,138.1,212.662-67.323,348.168-60.668,239,65.864,370.151,60.668,123.935-90.874,305.725-138.1,211.138-31.9,366.866-56.289,199.738-196.067,199.738-196.067V3510Z' }, 
      easing: 'easeInQuint', 
      // delay: function () {}, 
      duration: 5000, 
      loop: false, 
      // autoplay: true, 
    });

    ScrollOut({
      targets: '.flavours', 
      threshold: 0.1, 
      onShown: function(element, ctx, scrollingElement) {
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);
        window.addEventListener('scroll', () => {
          var startingPoint = ctx.elementHeight;
          var isStart = (window.scrollY-startingPoint/2)/startingPoint > 0 ;
          if (isStart) {
            morphing.seek(morphing.duration * window.scrollY/startingPoint);
          }
        });

        one = setTimeout(() => {
          jump('.target1', {
            duration: 1000, 
            offset: -400, 
            once: false,
            callback: () => {
              console.log('Scroll completed.');
            }
          });
        }, 500);
      }, 
      onHidden: function (element, ctx, scrollingElement) {
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);
      }
    });

    ScrollOut({
      targets: '.location', 
      threshold: 0.01, 
      onShown: function(element, ctx, scrollingElement) {

        // window.addEventListener('scroll', () => {
        //   var startingPoint = ctx.elementHeight;
        //   var isStart = (window.scrollY-startingPoint/2)/startingPoint > 0 ;
        //   if (isStart) {
        //     morphing.seek(morphing.duration * window.scrollY/startingPoint);
        //   }
        // });
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);

        two = setTimeout(() => {
          jump('.target2', {
            duration: 1000, 
            offset: -300, 
            once: false,
            callback: () => {
              console.log('Scroll completed.');
            }
          });
        }, 500);
      }, 
      onHidden: function (element, ctx, scrollingElement) {
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);
      }
    });

    ScrollOut({
      targets: '.gallery', 
      threshold: 0.15, 
      onShown: function(element, ctx, scrollingElement) {
        console.log('shown');

        // window.addEventListener('scroll', () => {
        //   var startingPoint = ctx.elementHeight;
        //   var isStart = (window.scrollY-startingPoint/2)/startingPoint > 0 ;
        //   if (isStart) {
        //     morphing.seek(morphing.duration * window.scrollY/startingPoint);
        //   }
        // });
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);

        three = setTimeout(() => {
          jump('.footer', {
            duration: 1000, 
            once: false,
            callback: () => {
              console.log('Scroll completed.');
            }
          });
        }, 500);
      }, 
      onHidden: function (element, ctx, scrollingElement) {
        clearTimeout(one);
        clearTimeout(two);
        clearTimeout(three);
      }
    });

  </script>
</body>
</html>